@page "/documents/details/{Id:int}"
@* @rendermode InteractiveWebAssembly *@
@using SharedLib.Models
@using SharedLib.ViewModels
@inject HttpClient Http

@if (document == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <h4>Document: @document.OriginalDocumentName</h4>
    <div class="d-flex flex-column mb-3">
        <div class="p-1">
            <strong>Date:</strong> @document.DocumentDate.ToString("yyyy-MM-dd")
        </div>
        <div class="p-1">
            <strong>User Name:</strong> @document.UserName
        </div>
    </div>
    @if (!string.IsNullOrEmpty(document.OCRText))
    {
        <p><strong>OCR Text:</strong> @document.OCRText</p>
    }
    @if (!string.IsNullOrEmpty(document.FileContent))
    {
        <img src="@document.FileContent" alt="Document Image" style="width:100%; max-height:auto;" />
    }
    else
    {
        <p><em>No image available.</em></p>
    }
}

@code {
    [Parameter] public int Id { get; set; }
    private DocumentDetailsVM? document;

    protected override async Task OnInitializedAsync()
    {
        document = await Http.GetFromJsonAsync<DocumentDetailsVM>($"api/documents/{Id}");
    }
}
